<?php 
/** 
 * @var $block \Divido\DividoFinancing\Block\Head
 */
?>
<script> 
__widgetConfig = {apiKey: '<?php echo $block->getDividoKey(); ?>',
                lenderConfig: { <?php echo $block->getDividoLenderPreset(); ?>
                    preset: 'ing' },
                theme: {<?php echo $block->getDividoCustomCalculatorColour(); ?>
                     colors: { primary: '#ff6200' } },
            }
</script>
<script type="text/javascript" src="<?php echo $block->getScriptUrl(); ?>"></script>
<script>// <![CDATA[
function waitForElementToDisplay(selector, time) {
        if(document.querySelector(selector)!=null) {
            __widgetInstance.init();
            return;
        }
        else {
            setTimeout(function() {
                waitForElementToDisplay(selector, time);
            }, time);
        }
    }
        require([
            'jquery',
            'domReady!'
        ], function ($) {
            waitForElementToDisplay('#dividoWidget', 1000); 
        });
        // ]]>
</script>